# 개인 SNS 페이지(제목: SSUSTAGRAM)

## 기술 스택

* 백엔드 - Node.js 
* 프론트엔드 - React + Javascript
* MaterialUI - 페이지 UI
* Axios - 프론트엔드에서 백엔드로 요청을 보내기 위해 사용
* passport - 로그인을 구현하기 위해 사용
* socket-io - 다이렉트 메시지(DM)을 구현하기 위해 사용
* nodemailer - 이메일 인증을 구현하기 위해 사용 
* mysql2 - MySQL을 사용하기 위해 사용
* multer - 업로드한 파일을 서버에 저장하기 위해 사용

***

## 각 폴더 별 설명

* models - MySQL 모델 코드
* passport - passport 관련 코드
* router - router 관련 코드
* uploads - 업로드한 파일을 multer로 저장한 파일이 있는 폴더
* server.js, socket.js - 각각 서버 코드와 socket-io 코드

***

## 라우터 별 동작 방식 설명

### 초기화면 (/)
초기화면은 사용자 이름(ID)와 비밀번호를 입력하면 로그인이 가능하다. 회원가입을 클릭하면 회원가입 화면으로 이동한다.

### 회원가입화면 (/account)
입력양식은 순서대로 이메일주소, 이름, 사용자 이름, 비밀번호를 입력하면 된다. 비밀번호는 pbkdf2를 사용하여 암호화해서 저장한다. 
이메일 주소와 사용자 이름의 중복은 passport를 사용하여 체크하도록 하였다. 이메일 검증은 로그인을 클릭하고 나서 하도록 하였다.

### 이메일 확인 (/email)
이메일 검증은 회원가입 후 로그인을 하였을 때 이메일이 검증되지 않았다면 라우팅된다. 
코드를 받을 수 있고, 받으면 4자리의 임의의 숫자+영어의 조합코드를 nodemailer를 사용하여 메일을 보내고 3분이 지나면 코드를 비활성화한다. 
코드를 DB에 저장했다가 없애는 방식으로 처리하였다. 이메일은 sumin.test.124@gmail.com 계정에서 보낸다.

### 사용자 소개 (/profile)
사용자 이름(ID)와 현재 시간을 Date.now()를 toLocaleString()을 사용하여 보여줬다.
현재 본인이 팔로잉하거나 본인을 팔로우한 사람들의 숫자와 사용자 이름(ID)을 보여준다.

### 홈 화면 (/home)
상단의 앱 바에 순서대로 /new, /profile, /follow, /msg와 로그아웃으로 이동하는 아이콘 버튼이 존재한다. 
로그아웃은 passport를 사용해 세션 로그아웃을 하였다. 앱 바의 SSUSTAGRAM을 클릭하면 홈 화면으로 이동한다.
상단의 앱 바에는 검색기능도 추가했다. 
라디오 버튼으로 검색을 수행할 3가지의 field 중 하나를 선택하고 해시태그는 string을 정확히 입력해야지만 검색이 가능하고, #을 제외하고 해시태그를 검색해야한다. 
ID로 검색과 일반 텍스트 검색은 substring 검색도 가능하도록 하였다. 
검색 바에서 검색 string을 모두 지우면 다시 모두 보이도록 하였다.
바둑판 모양의 3열로 게시물을 카드 형식으로 나열하였다. 
만약 작성자라면 게시물 편집 버튼이 보이며, 게시물의 사진 밑의 버튼을 누르면 사진이 전환되며, 현재 표시되고 있는 사진은 버튼이 채워져 있도록 하였다. 
작성자명과 해시태그는 클릭하면 해당 작성자 혹은 해시태그를 가진 게시물만 보이도록 하였다.

### 업로드 (/new)
업로드 화면에 버튼을 클릭하면 사진 업로드를 할 수 있다. 이 경우, 매번 클릭 시에 새로운 이미지를 받기 때문에 이전에 업로드를 해도 다시 업로드를 하여야 한다. 
텍스트와 해시태그를 동시에 입력 받는 단일 텍스트 입력 양식이 존재한다. 업로드 버튼을 클릭하면 업로드가 가능하다.

### 편집 (/edit)
업로드 화면과 같지만 우선, 전에 자신이 올렸던 이미지가 보인다. 이 때, 편집은 이전의 이미지는 삭제가 불가능하고 이미지 추가만 가능하도록 하였다. 
또한, 삭제 버튼을 클릭하면 삭제가 가능하며, 업로드 버튼을 클릭하면 업로드가 가능하다.

### 팔로우 (/follow)
팔로우인 사람과 팔로우가 가능한 사람들의 목록을 표시한다. 모든 슈스타그램에 가입한 사람을 열람할 수 있으며, 
팔로우를 한 사람은 ‘언팔로우’라는 버튼이, 팔로우를 하지 않은 사람은 ‘팔로우’ 버튼이 나오도록 구현하였다.

### DM(/msg)
화면 좌측에 대화 가능한 상대들의 목록을 표시한다. 대화 가능한 상대들의 목록을 클릭하면 오른쪽 화면에 메시지가 나오고 가장 최근의 메시지에 포커싱된다.
